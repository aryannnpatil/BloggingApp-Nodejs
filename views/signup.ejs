










<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head.ejs') %>
    <title>Sign Up - Typora</title>
    <style>
      .auth-section {
        min-height: calc(100vh - 80px);
        display: flex;
        align-items: center;
        padding: 3rem 0;
      }

      .auth-container {
        max-width: 480px;
        margin: 0 auto;
        background: white;
        padding: 3rem;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .auth-header {
        text-align: center;
        margin-bottom: 2.5rem;
      }

      .auth-title {
        font-family: 'Playfair Display', serif;
        font-size: 2.5rem;
        font-weight: 900;
        margin-bottom: 0.5rem;
        color: var(--dark);
      }

      .auth-subtitle {
        color: var(--gray);
        font-size: 1rem;
      }

      .auth-link {
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
      }

      .auth-link:hover {
        text-decoration: underline;
      }

      .auth-footer {
        text-align: center;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid #e2e8f0;
        color: var(--gray);
      }

      .password-strength {
        height: 4px;
        background: #e2e8f0;
        border-radius: 2px;
        margin-top: 0.5rem;
        overflow: hidden;
      }

      .password-strength-bar {
        height: 100%;
        width: 0%;
        transition: all 0.3s ease;
        background: var(--danger);
      }

      .password-strength-bar.weak {
        width: 33%;
        background: var(--danger);
      }

      .password-strength-bar.medium {
        width: 66%;
        background: #f59e0b;
      }

      .password-strength-bar.strong {
        width: 100%;
        background: var(--success);
      }

      .profile-upload-wrapper {
        position: relative;
        margin-bottom: 1.5rem;
      }

      .profile-preview-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }

      .profile-image-preview {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--primary);
        display: none;
      }

      .profile-placeholder {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        color: white;
        font-weight: 700;
      }

      .profile-upload-label {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.625rem 1.5rem;
        background: var(--light);
        color: var(--dark);
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .profile-upload-label:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      .profile-upload-label input[type="file"] {
        display: none;
      }

      @media (max-width: 768px) {
        .auth-container {
          padding: 2rem 1.5rem;
        }

        .auth-title {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <%- include('./partials/nav.ejs') %>

    <section class="auth-section">
      <div class="container">
        <div class="auth-container">
          <div class="auth-header">
            <h1 class="auth-title">Join Typora</h1>
            <p class="auth-subtitle">Start sharing your stories today</p>
          </div>

          <form action="/user/signup" method="post" enctype="multipart/form-data">
            <!-- Profile Image Upload -->
            <div class="profile-upload-wrapper">
              <div class="profile-preview-container">
                <div class="profile-placeholder" id="placeholder">
                  <span id="placeholderInitial">ðŸ‘¤</span>
                </div>
                <img id="profilePreview" class="profile-image-preview" alt="Profile preview" />
                
                <label for="profileImage" class="profile-upload-label">
                  <span>ðŸ“¸</span>
                  <span id="uploadText">Upload Profile Photo</span>
                  <input 
                    type="file" 
                    id="profileImage" 
                    name="profileImage" 
                    accept="image/*" 
                    onchange="previewProfileImage(event)"
                  />
                  <span style="font-size: 0.85rem; color: var(--gray); display: block; margin-top: 0.5rem;">(Optional)</span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="fullName" class="form-label">Full Name</label>
              <input
                type="text"
                class="form-control"
                id="fullName"
                name="fullName"
                placeholder="John Doe"
                required
                oninput="updatePlaceholder(this.value)"
              />
            </div>

            <div class="form-group">
              <label for="email" class="form-label">Email Address</label>
              <input
                type="email"
                name="email"
                class="form-control"
                id="email"
                placeholder="you@example.com"
                required
              />
              <div class="form-text">We'll never share your email with anyone else.</div>
            </div>

            <div class="form-group">
              <label for="password" class="form-label">Password</label>
              <input
                type="password"
                name="password"
                class="form-control"
                id="password"
                placeholder="Create a strong password"
                required
                oninput="checkPasswordStrength(this.value)"
              />
              <div class="password-strength">
                <div class="password-strength-bar" id="strengthBar"></div>
              </div>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 1.05rem; padding: 0.875rem;">
              Create Account
            </button>
          </form>

          <div class="auth-footer">
            Already have an account? <a href="/user/signin" class="auth-link">Sign in</a>
          </div>
        </div>
      </div>
    </section>

    <script>
      function previewProfileImage(event) {
        const preview = document.getElementById('profilePreview');
        const placeholder = document.getElementById('placeholder');
        const uploadText = document.getElementById('uploadText');
        const file = event.target.files[0];
        
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
            placeholder.style.display = 'none';
            uploadText.textContent = 'Change Photo';
          }
          reader.readAsDataURL(file);
        }
      }

      function updatePlaceholder(name) {
        const placeholderInitial = document.getElementById('placeholderInitial');
        if (name.trim()) {
          placeholderInitial.textContent = name.charAt(0).toUpperCase();
        } else {
          placeholderInitial.textContent = 'ðŸ‘¤';
        }
      }

      function checkPasswordStrength(password) {
        const strengthBar = document.getElementById('strengthBar');
        const length = password.length;
        
        if (length === 0) {
          strengthBar.className = 'password-strength-bar';
        } else if (length < 6) {
          strengthBar.className = 'password-strength-bar weak';
        } else if (length < 10) {
          strengthBar.className = 'password-strength-bar medium';
        } else {
          strengthBar.className = 'password-strength-bar strong';
        }
      }
    </script>

    <%- include('./partials/scripts.ejs') %>
  </body>
</html>